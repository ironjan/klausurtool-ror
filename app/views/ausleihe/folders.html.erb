<%= page_heading 'Ordner-Exemplare' %>

<%= form_tag ausleihe_folders_path, method: 'get', :class => 'form-inline' do %>
    <div class="form-group">
      <%= label_tag :search, 'Ordner suchen:' %>
      <%= text_field_tag :search, params[:search], :class => 'form-control', autofocus: true  %>
      <%= submit_tag 'Suche', :class => 'btn btn-primary' %>
      <%= submit_tag 'ZurÃ¼cksetzen', :id => 'reset_button', :name => 'reset', :class => 'btn' %>
    </div>
<% end %>

<div class="clearfix spacer">
  <%= will_paginate @old_folder_instances %>

  <table class="table table-hover">
    <tr>
      <th></th>
      <th>Code</th>
      <th>Name</th>
      <th>Inhalt</th>
      <th>Gebiet</th>
      <th></th>
    </tr>
    <!-- todo Extract "VerfÃ¼gbar" from here -->
    <% @old_folder_instances.each do |instance| %>
        <tr>
          <td style="background-color: <%= instance.old_folder.css_color %>"></td>
          <td><%= instance.barcodeId %></td>
          <td><%= instance.old_folder.title %></td>
          <td><%= instance.old_folder.contentType %></td>
          <td><%= instance.old_folder.area %></td>
          <td>
            <% if instance.old_lend_out.nil? %>
                <%= link_to 'Verleihen', lending_form_path(old_folder_instances: [instance]) %>
            <% end %>
          </td>
        </tr>
    <% end %>
  </table>
</div>

<% unless @old_folders.nil? %>
    <%= link_to 'Nur Ordner mit defektem Encoding anzeigen.', folders_broken_encodings_path, class: "btn btn-default pull-right" %>

    <div>
      <table class="table">
        <tr>
          <th></th>
          <th>Gruppen-Name</th>
          <th>Inhalt</th>
          <th>Gebiet</th>
          <th></th>
        </tr>

        <% @old_folders.each do |old_folder| %>
            <tr>
              <td style="background-color: <%= old_folder.css_color %>"></td>
              <td><%= link_to old_folder.title, old_folder %></td>
              <td><%= old_folder.contentType %></td>
              <td><%= old_folder.area %></td>
              <td><%= link_to 'Bearbeiten', edit_old_folder_path(old_folder) %>
              </td>
            </tr>
        <% end %>
      </table>
    </div>

<% else %>
    <div><p>Keine Ordner gefunden.</p></div>
<% end %>
